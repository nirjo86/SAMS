[header](_header.md ':include')

# Project Configuration

Project files are named `saasify.json` and should be placed at the root of your project similar to how `package.json` files work.

## Debugging

To quickly check whether or not your `saasify.json` file is valid, you can run `saasify debug` from within your project's directory or run `saasify debug <path-to-saasify.json>`.

<p align="center">
  <img src="./_media/undraw/bug_fixing.svg" alt="Debugging" width="200" />
</p>

## Specification

`saasify.json` should be a valid JSON file that conforms to the following TypeScript pseudocode:

!> This config may look complicated, but most of the fields are optional with sensible defaults. Start with a really simple config that just specifies your `services` and only customize further once you're ready to publish your SaaS product.

```ts
class Config {
  // project name
  name?: string

  // optional version info
  saasifyVersion?: number = 1
  version?: string = '0.1.0'

  // optional metadata
  description?: string
  keywords?: string[]

  // pricing
  pricingPlans?: PricingPlan[]
  coupons?: object[]

  // general config
  build?: object
  env?: object
  headers?: object
  immutable?: boolean

  // saas marketing site config
  saas?: SaaS

  // core services
  services: Service[] // required
}

class Service {
  src: string // required
  name?: string
  examples?: Example[]
  GET?: boolean
  POST?: boolean
}

class Example {
  name: string
  input: object
  output?: string | object
}

class SaaS {
  name?: string
  repo?: string
  heading?: string
  subheading?: string
  logo?: string
  favicon?: string
  features?: Feature[]
  theme?: Theme
}

class Theme {
  name?: string
}

class Feature {
  name: string
  desc: string
  icon: string
}
```

Note that the only **required** property is a non-empty `services` array.

## Simple Example

```json
{
  "name": "hello-world",
  "services": [
    {
      "src": "index.ts"
    }
  ]
}
```

## Advanced Example

This config file contains examples for each service as well as some customizations for the autogenerated SaaS web client.

```json
{
  "name": "puppet-master",
  "services": [
    {
      "src": "src/screenshot.ts",
      "examples": [
        {
          "name": "Basic",
          "input": {
            "url": "https://youtube.com"
          }
        },
        {
          "name": "Custom",
          "input": {
            "url": "https://github.com",
            "type": "jpeg",
            "quality": 90,
            "viewport": {
              "width": 1920,
              "height": 1080,
              "deviceScaleFactor": 2
            },
            "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.132 Safari/537.36"
          }
        }
      ]
    },
    {
      "src": "src/pdf.ts",
      "examples": [
        {
          "name": "Basic",
          "input": {
            "url": "https://producthunt.com"
          }
        }
      ]
    }
  ],
  "saas": {
    "name": "Puppet Master",
    "heading": "Puppeteer as a Service",
    "subheading": "Control headless Chrome via a simple SaaS API!",
    "repo": "https://github.com/saasify-sh/puppet-master",
    "logo": "./media/logo.svg",
    "favicon": "./media/favicon.ico"
  },
  "env": {
    "EXAMPLE_DYNAMIC_ENV_VAR": "@my-dynamic-secret",
    "EXAMPLE_STATIC_ENV_VAR": "foobar"
  }
}
```

## Properties

#### name

Project name. If not provided, this will default to the containing folder's name.

`name` cannot contain underscores. Validation regex `/^[a-zA-Z0-9-]{3,64}$/`.

#### saasifyVersion

Optional platform version. The only allowable value is currently `1`.

#### version

Optional project semver version. Will be used by deployments during publishing.

Defaults to `0.1.0`.

#### pricingPlans

Optional array of `PricingPlan` objects to fully customize the pricing of your project.

See [pricng](./pricing.md) for details on how to configure pricing including examples of common pricing models.

#### env

Environment variables passed to all of this project's services at runtime.

See the guide on [environment variables & secrets](./env-vars-and-secrets.md) for more info.

#### build.env

Environment variables passed to all of this project's services at build time.

See the guide on [environment variables & secrets](./env-vars-and-secrets.md) for more info.

#### coupons

Optional array of Coupon objects which should be enabled for this deployment.

Coupons are very useful for offering discounts to different customer segments.

Saasify coupons follow the same format as [Stripe coupons](https://stripe.com/docs/billing/subscriptions/discounts). The only difference is that you are not allowed to specify an `id` at the moment due to coupon codes needing to be unique among all projects and deployments.

#### saas

Optional customization for the auto-generated SaaS client.

##### saas.name

Optional display name for the title of the SaaS website.

##### saas.repo

Optional link to the public repository containing the source code for this project.

Note that linking to GitHub issues is a good starting point for providing basic support for your SaaS product.

##### saas.heading

Optional main intro heading in the hero section of the website.

##### saas.subheading

Optional sub-heading in the hero section of the website.

##### saas.logo

Optional path to a local `png` or `svg` image file that will be used as the main logo for the SaaS website.

Path should be relative to the config file. E.g., `'./media/logo.png'`.

##### saas.favicon

Optional path to a local `png` or `ico` image file that will be used as the favicon for the SaaS website.

Path should be relative to the config file. E.g., `'./media/favicon.ico'`.

##### saas.features

Optional array of product features that will be listed on the SaaS website's homepage.

Each feature must have a `name`, `desc`, and `icon`.

The `name` is the feature's title (should be no longer than a few words). The `desc` is the feature's description (should be one to two sentences). The `icon` is the feature's icon, preferably in SVG format.

The `icon` may be any of the following:

- A path to a local `png` or `svg` image file that will be uploaded by Saasify.
- The name of an [Undraw](https://undraw.co/illustrations) SVG (all lowercase, with underscores instead of spaces).
- A URL to a remote `png` or `svg` image file.

##### saas.theme

Optional theme overrides for fine-grained control over the look & feel of the auto-generated SaaS website.

###### saas.theme.name

Name of built-in SaaS theme to use for the SaaS website.

Current valid options are `okta` (default), `sadie`, and `nala`.

For more info on these themes and theme customization, see [themes](./themes.md).

Note that in the future, we're expecting to add many more optional fields here for more fine-grained control over theme customization.

#### services

**Required** non-empty array of `Service` objects that comprise this project's functionality.

Each service is made up of a source TypeScript function and will be transformed by [FTS](https://github.com/transitive-bullshit/functional-typescript) into a serverless HTTPS endpoint that accepts `GET` and `POST` requests.

For more detail on writing these serverless functions, see [functions](./functions.md).

`Service` objects **require** a valid `src` property that points to a TypeSript file with a single function export. The path to the file should be relative to the folder containing the project config file.

They may optionally include `name` and `examples`.

You may optionally set `GET: false` or `POST: false` to disable a HTTP method for a service. Otherwise, by default, TypeScript services will support both GET and POST, and Python services will support whichever HTTP methods are specified in the source file.

<p align="center">
  <img src="./_media/undraw/product_teardown.svg" alt="Configuration" width="200" />
</p>
